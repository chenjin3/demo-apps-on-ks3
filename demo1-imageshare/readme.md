# imageshare是一个基于ks3的图片分享应用


#### feature如下：

1. 用户登录（用户名密码登录，社交账号登录）
2. 上传照片（拍照上传，本地图片上传）
3. 首页按时间顺序展示所有用户上传的图片
4. 个人页面展示本人上传的图片

#### 原型设计如下：

![应用原型](./prototyping/图片分享应用原型.png)

#### 本应用将演示如下Ks3接口的使用：

1. 通过账号下的AK, SK计算请求签名  [接口文档](http://ks3.ksyun.com/doc/api/index.html#请求签名)
2. POST表单上传文件  [接口文档](http://ks3.ksyun.com/doc/api/object/post.html)
3. 私密文件的外链生成
4. 上传回调处理      [接口文档](http://ks3.ksyun.com/doc/api/async/callback.html)


#### 架构说明

使用金山云存储服务时，很多人采用的做法是用户在浏览器/APP上传到应用服务器,然后应用服务器再把文件上传到KS3。
这种方法有三个缺点:

- 第一:上传慢,先上传到应用服务器,再上传到KS3,网络传送多了一倍。
- 第二:扩展性不好,如果后续用户多了,应用服务器会成为瓶颈。
- 第三:费用高,因为KS3上传流量是免费的。如果数据直传到KS3,不走应用服务器。那么将能省下应用服务器的流量费。

所以，我们建议采用服务端签名之后Web客户端直传文件的方案。（KS3用这个签名来对我们的应用进行身份识别认证）

Web端直传可以节省流量，但应用服务器无法知道用户上传的文件的地址（客户端经常需要从应用服务器获取所有文件的列表），所以需要KS3在获取到文件后回调用户应用服务器通知上传的文件的地址。
以便在用户应用服务器上维护上传文件的地址信息。这里使用KS3的上传回调处理接口（参见文档：http://ks3.ksyun.com/doc/api/async/callback.html）。
该操作是可选的，即如果应用服务器不需要知道上传文件的元数据，也可以不使用该接口。

这样，我们有了一个简单的方案，来实现可扩展的图片分享应用，架构如下图所示：

![应用架构图](./prototyping/framework_basedon_ks3.png)

